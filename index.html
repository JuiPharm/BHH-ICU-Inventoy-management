<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ICU Stock Management</title>
  <link rel="stylesheet" href="styles.css" />
  <script>
    // Edit only this line after you deploy Apps Script (exec URL):
    window.API_BASE_URL = "https://script.google.com/macros/s/AKfycbxk8YusmqCrn0fcPITsHYS_9UIYu9mdT-3R-pKjDyOy8R3TuLekUW0akCm0iWd_X_kcuA/exec"; // https://script.google.com/macros/s/.../exec
  </script>
</head>
<body>
  <div class="topbar">
    <div class="brand">
      <div class="brand-title">ICU Stock Management</div>
      <div class="brand-sub">GitHub Pages UI • Google Apps Script API</div>
    </div>
    <div class="userbox" id="userBox" hidden>
      <div class="userline"><span id="userName"></span> (<span id="userRole"></span>)</div>
      <button class="btn btn-secondary" id="btnLogout">Logout</button>
    </div>
  </div>

  <div class="container">
    <!-- Login View -->
    <section id="loginView" class="card">
      <h2>Login</h2>
      <div class="grid2">
        <label>
          <div class="label">StaffID</div>
          <input id="loginStaffId" type="text" autocomplete="username" placeholder="เช่น admin" />
        </label>
        <label>
          <div class="label">Password</div>
          <div class="row">
            <input id="loginPassword" type="password" autocomplete="current-password" placeholder="Password" />
            <button class="btn btn-secondary" id="btnTogglePw" type="button">Show</button>
          </div>
        </label>
      </div>

      <div class="row gap">
        <button class="btn" id="btnLogin">Login</button>
        <button class="btn btn-secondary" id="btnFirstTimeInit" type="button">First-time setup: Initialize Sheets</button>
      </div>

      <div class="hint">
        หากเพิ่งเริ่มใช้งานครั้งแรก ให้กด “Initialize Sheets” เพื่อสร้างชีต/หัวตารางและสร้างบัญชีผู้ดูแลเริ่มต้น
      </div>

      <div id="loginInfo" class="info" hidden></div>
    </section>

    <!-- App View -->
    <section id="appView" hidden>
      <div class="tabs" id="tabs"></div>
      <div class="panel card">
        <div class="panel-head">
          <h2 id="panelTitle">Inventory</h2>
          <div class="panel-actions" id="panelActions"></div>
        </div>
        <div id="panelBody"></div>
      </div>
    </section>
  </div>

  <!-- Loading Overlay -->
  <div class="overlay" id="loadingOverlay" hidden>
    <div class="spinner"></div>
    <div class="overlay-text">Loading...</div>
  </div>

  <!-- Message Box -->
  <div class="modal" id="msgModal" hidden>
    <div class="modal-card">
      <div class="modal-title" id="msgTitle">Message</div>
      <div class="modal-body" id="msgBody"></div>
      <div class="modal-foot">
        <button class="btn" id="msgOk">OK</button>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
